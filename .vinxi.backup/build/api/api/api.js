import{eventHandler as p,toWebRequest as d}from"@tanstack/start-server-core";const m=[{path:"/__root/backup",filePath:"/Users/robroma123/Reunion/netlify_repo/reunioncr/src/routes/__root.backup.tsx"},{path:"/__root",filePath:"/Users/robroma123/Reunion/netlify_repo/reunioncr/src/routes/__root.tsx"},{path:"/backup",filePath:"/Users/robroma123/Reunion/netlify_repo/reunioncr/src/routes/index.backup.tsx"},{path:"/",filePath:"/Users/robroma123/Reunion/netlify_repo/reunioncr/src/routes/index.tsx"}],P=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"];function R(o){return p(async s=>{const r=d(s);return await o({request:r})})}function _(o,s){const r=o.pathname.split("/").filter(Boolean),i=s.sort((e,t)=>{const n=e.routePath.split("/").filter(Boolean);return t.routePath.split("/").filter(Boolean).length-n.length}).filter(e=>{const t=e.routePath.split("/").filter(Boolean);return r.length>=t.length});for(const e of i){const t=e.routePath.split("/").filter(Boolean),n={};let a=!0;for(let l=0;l<t.length;l++){const c=t[l],f=r[l];if(c.startsWith("$"))if(c==="$"){const u=r.slice(l).join("/");if(u!=="")n["*"]=u,n._splat=u;else{a=!1;break}}else{const u=c.slice(1);n[u]=f}else if(c!==f){a=!1;break}}if(a)return{routePath:e.routePath,params:n,payload:e.payload}}}const h=m.filter(o=>o.$APIRoute);function b(o){const s=[];return o.forEach(r=>{const e=r.path.split("/").filter(Boolean).map(t=>t==="*splat"?"$":t.startsWith(":$")&&t.endsWith("?")?t.slice(1,-1):t).join("/");s.push({routePath:`/${e}`,payload:r})}),s}const w=async({request:o})=>{if(!h.length)return new Response("No routes found",{status:404});if(!P.includes(o.method))return new Response("Method not allowed",{status:405});const s=b(h),r=new URL(o.url,"http://localhost:3000"),i=_(r,s);if(!i)return new Response("Not found",{status:404});let e;try{e=await i.payload.$APIRoute.import().then(a=>a.APIRoute)}catch(a){return console.error("Error importing route file:",a),new Response("Internal server error",{status:500})}if(!e)return new Response("Internal server error",{status:500});const t=o.method,n=e.methods[t];return n?await n({request:o,params:i.params}):new Response("Method not allowed",{status:405})},y=R(w);export{y as default};
